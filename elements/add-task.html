<dom-module id="add-task">
    
  <template>
      <style>
        :host {
                font-family:Arial;
                font-size: 14px;
            }

            fieldset {
                border: 0;
            }

            label,
            input {
                display: block;
                width: 100%;
            }

            .button {
                width: 100px;
                margin: 0 auto;
            }

            .task-recurrence{
                width:30px;
            }

            #title-error{
                color: red;
                display: none;
            }
        
        </style>
        <template is="dom-if" if="{{isShown}}" restamp="true">
            <fieldset name="taskDetails">
                <label for="title">Task Title:</label>
                <input required type="text" id="title"/>
                <div id="title-error">
                    *Required
                </div>
                
                <label for="description">Description:</label>
                <input type="text" id="description"/>
            </fieldset>
            <fieldset name="recurrenceDetails">
                <label for="recurrence">Frequency every:</label>
                <input type="text" class="task-recurrence" maxlength="2" id="txtRecurrence"/>
                <select id="intRecurrence">
                    <option value="day">Day(s)</option>
                    <option value="week">Week(s)</option>
                    <option value="month">Month(s)</option>
                    <option value="year">Year(s)</option>         
                </select>
            </fieldset>
            
            <button class="button" value="Add Task" on-click="createTask">Add Task </button>
        </template>
    </template>
</dom-module>
<script>
    Polymer({
        is:"add-task",
        properties:{
            isShown:{
                type:Boolean,
                value: false,
                notify: true
            },
            onAdd:{
                type:Object
            }
        },
        createTask: function(){
            if (this._validateTask()){
                this.onAdd({
                    title: this.$$('#title').value,
                    description: this.$$('#description').value,
                    intrecurrence: this.$$('#intRecurrence').value,
                    txtRecurrence: this.$$('#txtRecurrence').value
                    //this.$.title.value - use this to access elements when not in a dom-if
                });
                this.isShown = false;
            }
            else{
                this.$$('#title-error').style.display = "block";
            }
        },
        _validateTask: function(){
            if (this.$$('#title').value === ''){
                return false;
            }
            return true;
        }

    });
</script>


